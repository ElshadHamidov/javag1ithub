<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Management</title>
  <link rel="stylesheet" href="./products.css">
  <script src="https://kit.fontawesome.com/8b8c0b08e2.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <div class="top-banner">
    Summer Sale! 50% Off All Items & Free Express Delivery - OFF 50% <a href="#">ShopNow</a>
  </div>

  <header>
    <div class="logo">E-commerce</div>
    <nav>
      <a href="./index.html">Home</a>
      <a href="./contact.html">Contact</a>
      <a href="./about.html">About</a>
      <a href="./signup.html">Sign Up</a>
      <a href="./shop.html" class="shop-btn">Shop</a>
    </nav>
    <div class="header-right">
      <input type="text" placeholder="What are you looking for?" class="search-box">
      <button class="login-btn">Log In</button>
    </div>
  </header>

  <div class="container mt-4">
    <a href="add-product.html" class="btn btn-primary mb-3">Add New Product</a>

    <table id="productTable" class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>Id</th>
          <th>Brand</th>
          <th>Model</th>
          <th>Category</th>
          <th>Image</th>
          <th>Price</th>
          <th>Rating</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>
    <div class="footer-container">
      <div class="footer-section">
        <h3>Exclusive</h3>
        <p>Get 10% off your first order</p>
        <div class="subscribe">
          <input type="email" placeholder="Enter your email"><br><br>
          <button>Subscribe</button>
        </div>
      </div>

      <div class="footer-section">
        <h3>Support</h3>
        <p>111 Bijoy sarani, Dhaka, DH 1515, Bangladesh</p>
        <p>ecommerce@gmail.com</p>
        <p>+88015-88888-9999</p>
      </div>

      <div class="footer-section">
        <h3>Account</h3>
        <a href="./profile.html">My Account</a>
        <a href="./signup.html">Login / Register</a>
        <a href="./cart.html">Cart</a>
        <a href="./order.html">My Order</a>
        <a href="./products.html">My Products</a>
      </div>

      <div class="footer-section">
        <h3>Quick Link</h3>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms Of Use</a>
        <a href="#">FAQ</a>
        <a href="#">Contact</a>
      </div>

      <div class="footer-section">
        <h3>Download App</h3>
        <img src="https://th.bing.com/th/id/OIP.VfrGvim12lMo8DRnHOCTlwHaHU?w=188&h=186&c=7&r=0&o=7&pid=1.7&rm=3" alt="App QR">
        <div class="social-icons">
          <a href="#"><i class="fa-brands fa-facebook"></i></a>
          <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
          <a href="#"><i class="fa-brands fa-instagram"></i></a>
          <a href="#"><i class="fa-brands fa-linkedin"></i></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">Â© Copyright Remi 2025. All rights reserved.</div>
  </footer>

  <script>
    const API_URL = "http://localhost:8086/api/products";
    let products = [];

    async function loadProducts() {
      const res = await fetch(API_URL);
      products = await res.json();
      renderTable();
    }

    async function deleteProduct(id) {
      await fetch(`${API_URL}/${id}`, { method: "DELETE" });
      loadProducts();
    }

    function renderTable() {
      const tbody = document.querySelector("#productTable tbody");
      tbody.innerHTML = "";
      products.forEach(p => {
        tbody.innerHTML += `
          <tr>
            <td>${p.id}</td>
            <td>${p.brand}</td>
            <td>${p.model}</td>
            <td>${p.category}</td>
            <td><img src="${p.image}" alt="${p.model}" width="70"></td>
            <td>$${p.price.toFixed(2)}</td>
            <td>${p.rating}</td>
            <td>
              <a href="add-product.html?id=${p.id}" class="btn btn-warning btn-sm">Edit</a>
              <button class="btn btn-danger btn-sm" onclick="deleteProduct(${p.id})">Delete</button>
            </td>
          </tr>
        `;
      });
    }

    loadProducts();
  </script>
</body>

</html>
